{% extends "accounts/base_dashboard.html" %}

{% block title %}Change Password{% endblock %}

{% block dashboard_content %}
<div class="dashboard-header">
    <div>
        <h1>Change Password</h1>
        <p class="text-muted">Update your account password</p>
    </div>
</div>

<div class="form-card" style="max-width: 500px;">
    {% if form.non_field_errors %}
        <div class="alert alert-error">
            {% for error in form.non_field_errors %}
                {{ error }}
            {% endfor %}
        </div>
    {% endif %}

    <form method="post" novalidate>
        {% csrf_token %}
        
        <div class="form-group">
            <label for="current_password" class="form-label">Current Password *</label>
            <input type="password" 
                   id="current_password" 
                   name="current_password" 
                   class="form-control {% if form.current_password.errors %}error{% endif %}"
                   autocomplete="current-password"
                   required>
            {% if form.current_password.errors %}
                <span class="form-error">{{ form.current_password.errors.0 }}</span>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="new_password" class="form-label">New Password *</label>
            <input type="password" 
                   id="new_password" 
                   name="new_password" 
                   class="form-control {% if form.new_password.errors %}error{% endif %}"
                   autocomplete="new-password"
                   required>
            {% if form.new_password.errors %}
                <span class="form-error">{{ form.new_password.errors.0 }}</span>
            {% endif %}
        </div>

        <div style="background: rgba(255, 255, 255, 0.03); border: 1px solid var(--border-color); border-radius: 10px; padding: 1rem; margin-bottom: 1.5rem;">
            <h4 style="font-size: 0.85rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--text-secondary);">
                <i class="fas fa-shield-alt"></i> Password Requirements
            </h4>
            <ul style="list-style: none; font-size: 0.8rem; color: var(--text-muted);">
                <li style="padding: 0.25rem 0;"><i class="fas fa-check" style="margin-right: 0.5rem; font-size: 0.7rem;"></i> At least 8 characters long</li>
                <li style="padding: 0.25rem 0;"><i class="fas fa-check" style="margin-right: 0.5rem; font-size: 0.7rem;"></i> One uppercase letter (A-Z)</li>
                <li style="padding: 0.25rem 0;"><i class="fas fa-check" style="margin-right: 0.5rem; font-size: 0.7rem;"></i> One lowercase letter (a-z)</li>
                <li style="padding: 0.25rem 0;"><i class="fas fa-check" style="margin-right: 0.5rem; font-size: 0.7rem;"></i> One number (0-9)</li>
                <li style="padding: 0.25rem 0;"><i class="fas fa-check" style="margin-right: 0.5rem; font-size: 0.7rem;"></i> One special character (!@#$%^&*)</li>
            </ul>
        </div>

        <div class="form-group">
            <label for="confirm_password" class="form-label">Confirm New Password *</label>
            <input type="password" 
                   id="confirm_password" 
                   name="confirm_password" 
                   class="form-control {% if form.confirm_password.errors %}error{% endif %}"
                   autocomplete="new-password"
                   required>
            {% if form.confirm_password.errors %}
                <span class="form-error">{{ form.confirm_password.errors.0 }}</span>
            {% endif %}
        </div>

        <div style="display: flex; gap: 1rem;">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-lock"></i> Update Password
            </button>
            <a href="{% url 'accounts:dashboard' %}" class="btn btn-outline">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
