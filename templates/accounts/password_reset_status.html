{% extends "accounts/base_dashboard.html" %}

{% block title %}Password Reset Status{% endblock %}

{% block dashboard_content %}
<div class="dashboard-header">
    <div>
        <h1>Password Reset Requests</h1>
        <p class="text-muted">View the status of your password reset requests</p>
    </div>
</div>

{% if requests %}
    <div class="job-list">
        {% for req in requests %}
            <div class="job-card">
                <div class="job-info">
                    <h3>Request #{{ req.id }}</h3>
                    <p class="job-company">Submitted {{ req.created_at|date:"F j, Y, g:i a" }}</p>
                    <div class="job-meta">
                        <span class="badge badge-{{ req.status }}">{{ req.get_status_display }}</span>
                        {% if req.processed_at %}
                            <span class="job-date">Processed {{ req.processed_at|date:"F j, Y" }}</span>
                        {% endif %}
                    </div>
                </div>
                <div class="job-actions">
                    {% if req.status == 'approved' %}
                        <span style="color: var(--success); font-size: 0.85rem;">
                            <i class="fas fa-check-circle"></i> Check your email for new password
                        </span>
                    {% elif req.status == 'rejected' %}
                        <span style="color: var(--error); font-size: 0.85rem;">
                            <i class="fas fa-times-circle"></i> {{ req.admin_notes|default:"Request was rejected" }}
                        </span>
                    {% else %}
                        <span style="color: var(--warning); font-size: 0.85rem;">
                            <i class="fas fa-clock"></i> Awaiting admin review
                        </span>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="empty-state">
        <i class="fas fa-key"></i>
        <h3>No Password Reset Requests</h3>
        <p>You haven't submitted any password reset requests</p>
    </div>
{% endif %}
{% endblock %}
